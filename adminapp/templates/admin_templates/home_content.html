{% extends 'admin_templates/base_template.html' %}

{% block main_content %}

{% load static %}

<section class="content">
  <div class="container-fluid">
    <!-- Small boxes (Stat box) -->
    <div class="row">
      <div class="col-lg-3 col-6">
        <!-- small box -->
        <div class="small-box bg-info">
          <div class="inner">
            <h3>{{ student_count }}</h3>
            <p>Total Students</p>
          </div>
          <div class="icon">
            <i class="ion ion-stats-bars"></i>
          </div>
          <a href="{% url 'manage_student' %}" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
        </div>
      </div>
      <!-- ./col -->
      <div class="col-lg-3 col-6">
        <!-- small box -->
        <div class="small-box bg-danger">
          <div class="inner">
            <h3>{{ staff_count }}</h3>
            <p>Total Staffs</p>
          </div>
          <div class="icon">
            <i class="ion ion-stats-bars"></i>
          </div>
          <a href="{% url 'manage_staff' %}" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
        </div>
      </div>
      <!-- ./col -->

      <div class="col-lg-3 col-6">
        <!-- small box -->
        <div class="small-box bg-warning">
          <div class="inner">
            <h3>{{ course_count }}</h3>
            <p>Total Courses</p>
          </div>
          <div class="icon">
            <i class="ion ion-stats-bars"></i>
          </div>
          <a href="{% url 'manage_course' %}" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
        </div>
      </div>
      <!-- ./col -->
      <div class="col-lg-3 col-6">
        <!-- small box -->
        <div class="small-box bg-success">
          <div class="inner">
            <h3>{{ subject_count }}</h3>
            <p>Total Subjects</p>
          </div>
          <div class="icon">
            <i class="ion ion-stats-bars"></i>
          </div>
          <a href="{% url 'manage_subject' %}" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
        </div>
      </div>
      <!-- ./col -->
    </div>
    <!-- /.row -->

    <div class="row">
      <div class="col-lg-6">
        <!-- PIE CHART -->
        <div class="card card-danger">
          <div class="card-header">
            <h3 class="card-title">Student and Staff Chart</h3>
            <div class="card-tools">
              <button type="button" class="btn btn-tool" data-card-widget="collapse"><i
                  class="fas fa-minus"></i></button>
              <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
            </div>
          </div>
          <div class="card-body">
            <div id="pieChart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></div>
          </div>
          <!-- /.card-body -->
        </div>
        <!-- /.card -->
      </div>

      <div class="col-lg-6">
        <!-- DONUT CHART -->
        <div class="card card-danger">
          <div class="card-header">
            <h3 class="card-title">Total Subjects in Each Course</h3>
            <div class="card-tools">
              <button type="button" class="btn btn-tool" data-card-widget="collapse"><i
                  class="fas fa-minus"></i></button>
              <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
            </div>
          </div>
          <div class="card-body">
            <div id="donutChart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></div>
          </div>
          <!-- /.card-body -->
        </div>
        <!-- /.card -->
      </div>
    </div>

    <div class="row">
      <div class="col-lg-6">
        <!-- PIE CHART -->
        <div class="card card-info">
          <div class="card-header">
            <h3 class="card-title">Total Students in Each Course</h3>
            <div class="card-tools">
              <button type="button" class="btn btn-tool" data-card-widget="collapse"><i
                  class="fas fa-minus"></i></button>
              <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
            </div>
          </div>
          <div class="card-body">
            <div id="pieChart2" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></div>
          </div>
          <!-- /.card-body -->
        </div>
      </div>

      <div class="col-lg-6">
        <!-- PIE CHART -->
        <div class="card card-info">
          <div class="card-header">
            <h3 class="card-title">Total Students in Each Subject</h3>
            <div class="card-tools">
              <button type="button" class="btn btn-tool" data-card-widget="collapse"><i
                  class="fas fa-minus"></i></button>
              <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
            </div>
          </div>
          <div class="card-body">
            <div id="pieChart3" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></div>
          </div>
          <!-- /.card-body -->
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-lg-12">
        <!-- BAR CHART -->
        <div class="card card-success">
          <div class="card-header">
            <h3 class="card-title">Staff Attendance vs Leave</h3>
            <div class="card-tools">
              <button type="button" class="btn btn-tool" data-card-widget="collapse"><i
                  class="fas fa-minus"></i></button>
              <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
            </div>
          </div>
          <div class="card-body">
            <div id="barChart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></div>
          </div>
          <!-- /.card-body -->
        </div>
        <!-- /.card -->
      </div>
    </div>

    <div class="row">
      <div class="col-lg-12">
        <!-- BAR CHART -->
        <div class="card card-success">
          <div class="card-header">
            <h3 class="card-title">Student Attendance vs Leave</h3>
            <div class="card-tools">
              <button type="button" class="btn btn-tool" data-card-widget="collapse"><i
                  class="fas fa-minus"></i></button>
              <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
            </div>
          </div>
          <div class="card-body">
            <div id="barChart2" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></div>
          </div>
          <!-- /.card-body -->
        </div>
        <!-- /.card -->
      </div>
    </div>
  </div><!-- /.container-fluid -->
</section>

{% endblock main_content %}

{% block custom_js %}
<script src="{% static 'apexcharts/dist/apexcharts.min.js' %}"></script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    // Pie Chart for Staff and Students
    var staff_count = {{ staff_count }};
    var student_count = {{ student_count }};

    var options1 = {
      series: [staff_count, student_count],
      chart: {
        height: 350,
        type: 'pie'
      },
      labels: ['Staff', 'Students'],
      title: {
       
        align: 'left'
      }
    };

    var chart1 = new ApexCharts(document.querySelector("#pieChart"), options1);
    chart1.render();

    var staff_count = {{ staff_count }};
    var student_count = {{ student_count }};
    
    // Pie Chart for Total Subjects in Each Course
    var options2 = {
      series: [3, 3],  // Update with actual data
      chart: {
        height: 350,
        type: 'pie'
      },
      labels: ['Subjects', 'Courses'],
      title: {
       
        align: 'left'
      }
    };

    var chart2 = new ApexCharts(document.querySelector("#donutChart"), options2);
    chart2.render();

    // Pie Chart for Total Students in Each Course
    var options3 = {
      series: [15, 25, 35, 45, 55], // Update with actual data
      chart: {
        height: 350,
        type: 'pie'
      },
      labels: ['Course 1', 'Course 2', 'Course 3', 'Course 4', 'Course 5'],
      title: {
       
        align: 'left'
      }
    };

    var chart3 = new ApexCharts(document.querySelector("#pieChart2"), options3);
    chart3.render();

    // Pie Chart for Total Students in Each Subject
    var options4 = {
      series: [10, 20, 30, 40, 50], // Update with actual data
      chart: {
        height: 350,
        type: 'pie'
      },
      labels: ['Subject 1', 'Subject 2', 'Subject 3', 'Subject 4', 'Subject 5'],
      title: {
        
        align: 'left'
      }
    };

    var chart4 = new ApexCharts(document.querySelector("#pieChart3"), options4);
    chart4.render();
  }); 
</script>
{% endblock custom_js %}
